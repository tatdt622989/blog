<!DOCTYPE HTML>
<html lang="zh-TW">
<head>
  <meta charset="utf-8">
  
  <title>如何用 matter.js 製作西瓜遊戲? | 6yuwei</title>
  <meta name="author" content="6yuwei">
  
  <meta name="description" content="matter.js 是什麼?matter.js 是一個輕量級的 2D 物理引擎，它可以幫助你在網頁上製作出各種有趣的物理效果，例如碰撞、重力、彈力等等。這個物理引擎的特色在於它的易用性，只需要幾行程式碼，就可以讓你的網頁元素擁有物理效果，並且可以透過它的 API 來控制物理效果的各種參數。">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="如何用 matter.js 製作西瓜遊戲?"/>
  <meta property="og:site_name" content="6yuwei"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3389697259947664"
      crossorigin="anonymous"></script>

  <link rel="shortcut icon" href="/favicon.png">
  
  
<link rel="stylesheet" href="/css/style.css?v=240229-2.css">

  <!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script><![endif]-->
  
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga('create', '279078064', 'auto');
	ga('send', 'pageview');

</script>


<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <!-- <h1><a href="/">6yuwei</a></h1> -->
  <div class="logo">
    <a href="/">
      <img src="/img/logo.svg" alt="6yuwei">
    </a>
  </div>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
    <li><a href="https://6yuwei.com" target="_blank">Works</a></li>
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article id="post-如何用-matter-js-製作西瓜遊戲" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon" style="display: none"></div>
        <time class="dt-published" datetime="2024-02-28T13:07:04.000Z"><a href="/2024/02/28/%E5%A6%82%E4%BD%95%E7%94%A8-matter-js-%E8%A3%BD%E4%BD%9C%E8%A5%BF%E7%93%9C%E9%81%8A%E6%88%B2/">2024-02-28</a></time>
      
      
  
    <h1 class="p-name title" itemprop="headline name">如何用 matter.js 製作西瓜遊戲?</h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p><img src="/2024/02/28/%E5%A6%82%E4%BD%95%E7%94%A8-matter-js-%E8%A3%BD%E4%BD%9C%E8%A5%BF%E7%93%9C%E9%81%8A%E6%88%B2/cover.jpg"></p>
<h2 id="matter-js-是什麼"><a href="#matter-js-是什麼" class="headerlink" title="matter.js 是什麼?"></a>matter.js 是什麼?</h2><p>matter.js 是一個輕量級的 2D 物理引擎，它可以幫助你在網頁上製作出各種有趣的物理效果，例如碰撞、重力、彈力等等。這個物理引擎的特色在於它的易用性，只需要幾行程式碼，就可以讓你的網頁元素擁有物理效果，並且可以透過它的 API 來控制物理效果的各種參數。</p>
<span id="more"></span>

<h2 id="西瓜遊戲是什麼"><a href="#西瓜遊戲是什麼" class="headerlink" title="西瓜遊戲是什麼?"></a>西瓜遊戲是什麼?</h2><p>西瓜遊戲是一款簡單的休閒遊戲，玩家的目標是通過將相同大小的西瓜合成，來製作出越來越大的西瓜。玩家只需拖動或點擊螢幕來控制小西瓜落下的位置，當兩個相同大小的西瓜碰撞時，就會合成為一個更大的西瓜。</p>
<p><img src="/2024/02/28/%E5%A6%82%E4%BD%95%E7%94%A8-matter-js-%E8%A3%BD%E4%BD%9C%E8%A5%BF%E7%93%9C%E9%81%8A%E6%88%B2/game.png"></p>
<p>這是一個成品的DEMO，你可以點擊<a target="_blank" rel="noopener" href="https://app.6yuwei.com/suika_game/">這個連結</a>來體驗一下這款遊戲，或是到<a target="_blank" rel="noopener" href="https://github.com/tatdt622989/suika-game">GitHub</a>上下載這個遊戲的原始碼。</p>
<h2 id="製作遊戲素材"><a href="#製作遊戲素材" class="headerlink" title="製作遊戲素材"></a>製作遊戲素材</h2><p>在製作西瓜遊戲之前，需要先製作遊戲的素材，而我在這裡使用了 <a target="_blank" rel="noopener" href="https://www.recraft.ai/">Recraft: AI Image Generator</a> 來產生遊戲素材，再將素材使用<a target="_blank" rel="noopener" href="https://crop-circle.imageonline.co/">這個網站</a>將圖片裁切成圓形後，套用到遊戲中。</p>
<p><img src="/2024/02/28/%E5%A6%82%E4%BD%95%E7%94%A8-matter-js-%E8%A3%BD%E4%BD%9C%E8%A5%BF%E7%93%9C%E9%81%8A%E6%88%B2/ball.png"></p>
<h2 id="遊戲介面"><a href="#遊戲介面" class="headerlink" title="遊戲介面"></a>遊戲介面</h2><p>這個遊戲的介面很單純，只有一個遊戲畫面和一個分數顯示區域。可以參考以下的HTML來製作遊戲的介面。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 分數顯示區域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;score&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>SCORE:<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;num&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 遊戲畫面 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;scene&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="安裝-matter-js"><a href="#安裝-matter-js" class="headerlink" title="安裝 matter.js"></a>安裝 matter.js</h2><p>首先，需要安裝 matter.js，可以透過 npm 來安裝 matter.js。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install matter-js</span><br></pre></td></tr></table></figure>

<p>你可以使用vite、webpack等工具來建立專案，這裡使用 vite 來建立專案。<br>建立vite專案請參考<a target="_blank" rel="noopener" href="https://vitejs.dev/guide/">vite官方文檔</a>。</p>
<p>在進入點main.js中引入matter.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Matter</span> <span class="keyword">from</span> <span class="string">&#x27;matter-js&#x27;</span>; <span class="comment">// 引入matter.js</span></span><br></pre></td></tr></table></figure>

<h2 id="引入遊戲素材"><a href="#引入遊戲素材" class="headerlink" title="引入遊戲素材"></a>引入遊戲素材</h2><p>將遊戲素材引入到專案中，並使用預加載的方式來引入圖片。在這裡我使用了11不同尺寸的圖片，分別對應遊戲內11種不同的圓形的大小。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> t1 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t1.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t2 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t2.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t3 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t3.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t4 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t4.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t5 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t5.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t6 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t6.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t7 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t7.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t8 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t8.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t9 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t9.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t10 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t10.png&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> t11 <span class="keyword">from</span> <span class="string">&#x27;./assets/images/t11.png&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> imgUrl = [t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11];</span><br><span class="line"></span><br><span class="line"><span class="comment">// preload images</span></span><br><span class="line">imgUrl.<span class="title function_">forEach</span>(<span class="function">(<span class="params">url</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">  img.<span class="property">src</span> = url;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="初始化-matter-js"><a href="#初始化-matter-js" class="headerlink" title="初始化 matter.js"></a>初始化 matter.js</h2><p>在初始化 matter.js 之前，需要先了解 matter.js 的一些基本概念。matter.js 中有許多重要的物件，例如 Engine、World、Bodies、Body 等等，這些物件都是 matter.js 中的重要概念，需要了解這些物件的作用，才能夠正確地使用 matter.js 來製作遊戲。<br>在這個遊戲中，使用到 Engine, Render, Composite, Bodies, Body, Runner, Events 這些物件來製作遊戲，以下是這些物件的簡單介紹。</p>
<ul>
<li><strong>Engine</strong>: 用來創建一個物理引擎，並且可以透過它來控制物理效果的各種參數。</li>
<li><strong>Render</strong>: 用來創建一個渲染器，並且可以透過它來渲染物理效果。</li>
<li><strong>Composite</strong>: 用來創建一個物理世界，並且可以透過它來控制物理世界中的各種物體。</li>
<li><strong>Bodies</strong>: 用來創建各種不同形狀的物體，例如圓形、矩形、多邊形等等。</li>
<li><strong>Body</strong>: 用來控制物體的各種參數，例如位置、速度、角度等等。</li>
<li><strong>Runner</strong>: 用來創建一個運行器，並且可以透過它來運行物理引擎。</li>
<li><strong>Events</strong>: 用來創建一個事件監聽器，並且可以透過它來監聽物理世界中的各種事件。</li>
</ul>
<p>在一開始，需要先使用Engine來創建一個物理引擎，接著使用Render來創建一個渲染器，然後使用Composite來創建一個物理世界，最後使用Runner來創建一個運行器，並且將物理引擎和渲染器連接起來。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> width = <span class="number">900</span>; <span class="comment">// 遊戲畫面的寬度</span></span><br><span class="line"><span class="keyword">const</span> height = <span class="number">900</span>; <span class="comment">// 遊戲畫面的高度</span></span><br><span class="line"><span class="keyword">const</span> limitY = <span class="number">140</span>; <span class="comment">// 遊戲結束的Y軸位置</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="title class_">Engine</span>, <span class="title class_">Render</span>, <span class="title class_">Composite</span>, <span class="title class_">Bodies</span>, <span class="title class_">Body</span>, <span class="title class_">Runner</span>, <span class="title class_">Events</span>,</span><br><span class="line">&#125; = <span class="title class_">Matter</span>;</span><br><span class="line"><span class="keyword">let</span> isGameOver = <span class="literal">false</span>; <span class="comment">// 遊戲是否結束</span></span><br><span class="line"><span class="comment">// 分數，寫入分數的時候會自動更新分數顯示區域</span></span><br><span class="line"><span class="keyword">const</span> score = &#123;</span><br><span class="line">  <span class="attr">num</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">num</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">value</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">num</span> = newValue;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#score .num&#x27;</span>).<span class="property">textContent</span> = <span class="variable language_">this</span>.<span class="property">num</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#gameOverScore&#x27;</span>).<span class="property">textContent</span> = <span class="variable language_">this</span>.<span class="property">num</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 建立物理引擎</span></span><br><span class="line"><span class="keyword">const</span> engine = <span class="title class_">Engine</span>.<span class="title function_">create</span>();</span><br><span class="line"><span class="comment">// 物理引擎更新頻率，單位為毫秒，60FPS為16.67毫秒，為了避免物理碰撞時的穿透問題，這裡設定為10毫秒</span></span><br><span class="line"><span class="title class_">Engine</span>.<span class="title function_">update</span>(engine, <span class="number">10</span>); </span><br><span class="line"><span class="keyword">const</span> &#123; world &#125; = engine;</span><br><span class="line"><span class="comment">// 重力加速度</span></span><br><span class="line">world.<span class="property">gravity</span>.<span class="property">y</span> = <span class="number">1.5</span>;</span><br><span class="line"><span class="comment">// 建立渲染器</span></span><br><span class="line"><span class="keyword">const</span> render = <span class="title class_">Render</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">element</span>: scene,</span><br><span class="line">  engine,</span><br><span class="line">  <span class="attr">options</span>: &#123;</span><br><span class="line">    width,</span><br><span class="line">    height,</span><br><span class="line">    <span class="attr">wireframes</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;transparent&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="建立遊戲物體"><a href="#建立遊戲物體" class="headerlink" title="建立遊戲物體"></a>建立遊戲物體</h2><p>在 matter.js 中，可以使用Bodies來創建各種不同形狀的物體，例如圓形、矩形、多邊形等等。在這個遊戲中，需要創建放置球體的牆面，以及球體本身。可以使用Bodies.rectangle創建牆面，並且使用Bodies.circle創建球體。</p>
<p>除此之外，還需要使用collisionFilter來設定碰撞的分組，讓最上方的球體不會與其他球體碰撞。</p>
<p>首先使用Bodies.rectangle，建立左、右、底部的牆面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> categoryOn = <span class="number">0x0001</span>; <span class="comment">// 球體的碰撞分組，使用16進位表示</span></span><br><span class="line"><span class="keyword">const</span> categoryOff = <span class="number">0x0002</span>; <span class="comment">// 牆面的碰撞分組，使用16進位表示</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 建立左、右、底部的牆面，厚度為20</span></span><br><span class="line"><span class="comment">// Bodies.rectangle(x, y, width, height, [options]) </span></span><br><span class="line"><span class="keyword">const</span> wallLeft = <span class="title class_">Bodies</span>.<span class="title function_">rectangle</span>(-<span class="number">10</span>, height / <span class="number">2</span>, <span class="number">20</span>, height, &#123;</span><br><span class="line">    <span class="attr">isStatic</span>: <span class="literal">true</span>, <span class="comment">// 讓牆面不會受到重力或碰撞的影響</span></span><br><span class="line">    <span class="attr">render</span>: &#123;</span><br><span class="line">      <span class="attr">fillStyle</span>: <span class="string">&#x27;#000000&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">collisionFilter</span>: &#123;</span><br><span class="line">      <span class="attr">group</span>: <span class="number">1</span>, <span class="comment">// 數字為正數時將總是碰撞，數字為負數時將總是不碰撞</span></span><br><span class="line">      <span class="attr">category</span>: categoryOn, <span class="comment">// 物體的分組</span></span><br><span class="line">      <span class="attr">mask</span>: categoryOn, <span class="comment">// 允許與哪個分組的物體與之碰撞</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> wallRight = <span class="title class_">Bodies</span>.<span class="title function_">rectangle</span>(width + <span class="number">10</span>, height / <span class="number">2</span>, <span class="number">20</span>, height, &#123;</span><br><span class="line">    <span class="attr">isStatic</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">render</span>: &#123;</span><br><span class="line">      <span class="attr">fillStyle</span>: <span class="string">&#x27;#000000&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">collisionFilter</span>: &#123;</span><br><span class="line">      <span class="attr">group</span>: <span class="number">1</span>, <span class="comment">// 數字為正數時將總是碰撞，數字為負數時將總是不碰撞</span></span><br><span class="line">      <span class="attr">category</span>: categoryOn, <span class="comment">// 物體的分組</span></span><br><span class="line">      <span class="attr">mask</span>: categoryOn, <span class="comment">// 允許與哪個分組的物體與之碰撞</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> wallBottom = <span class="title class_">Bodies</span>.<span class="title function_">rectangle</span>(width / <span class="number">2</span>, height + <span class="number">10</span>, width, <span class="number">20</span>, &#123;</span><br><span class="line">    <span class="attr">isStatic</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">render</span>: &#123;</span><br><span class="line">      <span class="attr">fillStyle</span>: <span class="string">&#x27;#000000&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">collisionFilter</span>: &#123;</span><br><span class="line">      <span class="attr">group</span>: <span class="number">1</span>, <span class="comment">// 數字為正數時將總是碰撞，數字為負數時將總是不碰撞</span></span><br><span class="line">      <span class="attr">category</span>: categoryOn, <span class="comment">// 物體的分組</span></span><br><span class="line">      <span class="attr">mask</span>: categoryOn, <span class="comment">// 允許與哪個分組的物體與之碰撞</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 將牆面加入物理世界</span></span><br><span class="line"><span class="title class_">Composite</span>.<span class="title function_">add</span>(world, [wallLeft, wallRight, wallBottom]);</span><br></pre></td></tr></table></figure>

<p>接著使用Bodies.circle創建球體的function，用來創造不同等級或狀態的球體。<br>這個function的參數有level、isStatic、x、y、canCollision，分別代表球體的等級、是否靜態、x軸位置、y軸位置、是否可以碰撞。<br>物體建立後，執行渲染器和運行器。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 創建球體</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">level</span> - 球體等級</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">boolean</span>&#125; <span class="variable">isStatic</span> - 是否靜態</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">x</span> - x軸位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">y</span> - y軸位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">boolean</span>&#125; <span class="variable">canCollision</span> - 是否可以碰撞</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">object</span>&#125; - 球體物件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createBall</span> = (<span class="params">level, isStatic = <span class="literal">true</span>, x = <span class="number">0</span>, y = <span class="literal">null</span>, canCollision = <span class="literal">true</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 球體比例</span></span><br><span class="line">    <span class="keyword">const</span> scale = <span class="number">0.85</span>;</span><br><span class="line">    <span class="comment">// 球體大小，共有11種不同大小的球體</span></span><br><span class="line">    <span class="keyword">const</span> sizes = [<span class="number">30</span>, <span class="number">45</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>, <span class="number">120</span>, <span class="number">140</span>, <span class="number">160</span>, <span class="number">180</span>, <span class="number">200</span>, <span class="number">220</span>];</span><br><span class="line">    <span class="keyword">const</span> size = sizes[level] * scale;</span><br><span class="line">    <span class="keyword">const</span> ball = <span class="title class_">Bodies</span>.<span class="title function_">circle</span>(x, y ?? limitY, size, &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&#x27;ball&#x27;</span>,</span><br><span class="line">        <span class="attr">restitution</span>: <span class="number">0.1</span>, <span class="comment">// 彈力</span></span><br><span class="line">        <span class="attr">density</span>: <span class="number">0.005</span>, <span class="comment">// 密度</span></span><br><span class="line">        <span class="attr">airFriction</span>: <span class="number">0</span>, <span class="comment">// 空氣摩擦</span></span><br><span class="line">        <span class="attr">mass</span>: <span class="number">5</span>, <span class="comment">// 質量</span></span><br><span class="line">        level, <span class="comment">// 球體等級</span></span><br><span class="line">        <span class="attr">render</span>: &#123;</span><br><span class="line">            <span class="attr">sprite</span>: &#123;</span><br><span class="line">                <span class="attr">texture</span>: imgUrl[level], <span class="comment">// 球體圖片</span></span><br><span class="line">                <span class="attr">xScale</span>: scale, <span class="comment">// x軸比例</span></span><br><span class="line">                <span class="attr">yScale</span>: scale, <span class="comment">// y軸比例</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">collisionFilter</span>: &#123;</span><br><span class="line">            <span class="attr">group</span>: canCollision ? <span class="number">1</span> : -<span class="number">1</span>, <span class="comment">// 數字為正數時將總是碰撞，數字為負數時將總是不碰撞</span></span><br><span class="line">            <span class="attr">category</span>: canCollision ? categoryOn : categoryOff, <span class="comment">// 物體的分組</span></span><br><span class="line">            <span class="attr">mask</span>: canCollision ? categoryOn : categoryOff, <span class="comment">// 允許與哪個分組的物體與之碰撞</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Composite</span>.<span class="title function_">add</span>(world, ball);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isStatic) &#123;</span><br><span class="line">        <span class="title class_">Body</span>.<span class="title function_">setStatic</span>(ball, isStatic); <span class="comment">// 設定球體是否靜態</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ball;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 創建初始球體，供玩家拖動</span></span><br><span class="line"><span class="keyword">let</span> holdBall = <span class="title function_">createBall</span>(<span class="number">0</span>, <span class="literal">true</span>, render.<span class="property">options</span>.<span class="property">width</span> / <span class="number">2</span>, limitY, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 執行渲染器</span></span><br><span class="line"><span class="title class_">Render</span>.<span class="title function_">run</span>(render);</span><br><span class="line"><span class="comment">// 建立運行器</span></span><br><span class="line"><span class="keyword">const</span> runner = <span class="title class_">Runner</span>.<span class="title function_">create</span>();</span><br><span class="line"><span class="comment">// 執行運行器</span></span><br><span class="line"><span class="title class_">Runner</span>.<span class="title function_">run</span>(runner, engine);</span><br></pre></td></tr></table></figure>
<h2 id="遊戲事件"><a href="#遊戲事件" class="headerlink" title="遊戲事件"></a>遊戲事件</h2><p>在遊戲中，需要監聽一些事件，例如滑鼠拖動、滑鼠點擊、碰撞等等。<br>matter.js 提供了Events物件，可以用來監聽物體碰撞、畫布更新等等事件。</p>
<p>首先，為了讓玩家能夠操作，需要先註冊移動、放開事件的事件，詳情如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 拖動事件，用來控制球體的位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleMoveEvents</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!holdBall) <span class="keyword">return</span>;</span><br><span class="line">  e.<span class="title function_">preventDefault</span>();</span><br><span class="line">  <span class="keyword">const</span> x = e.<span class="property">offsetX</span> === <span class="literal">undefined</span> ? e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientX</span> : e.<span class="property">offsetX</span>; <span class="comment">// 滑鼠或觸控的x軸位置</span></span><br><span class="line">  <span class="title class_">Body</span>.<span class="title function_">setPosition</span>(holdBall, &#123; x, <span class="attr">y</span>: limitY &#125;); <span class="comment">// 設定球體的位置</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 放開事件，用來放開球體，並且檢查是否已結束遊戲，若未結束則創建新的隨機等級的球體</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleDropEvents</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!holdBall) <span class="keyword">return</span>;</span><br><span class="line">  <span class="title class_">Body</span>.<span class="title function_">set</span>(holdBall, <span class="string">&#x27;collisionFilter&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">group</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">category</span>: categoryOn,</span><br><span class="line">    <span class="attr">mask</span>: categoryOn,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 解除球體的靜態狀態，讓球體可以受到重力影響</span></span><br><span class="line">  <span class="title class_">Body</span>.<span class="title function_">setStatic</span>(holdBall, <span class="literal">false</span>);</span><br><span class="line">  <span class="comment">// 設定球體的更新時間</span></span><br><span class="line">  holdBall.<span class="property">updateTs</span> = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">  <span class="comment">// 清空使用者可以拖動的球體</span></span><br><span class="line">  holdBall = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">const</span> x = e.<span class="property">offsetX</span> === <span class="literal">undefined</span> ? e.<span class="property">changedTouches</span>[<span class="number">0</span>].<span class="property">clientX</span> : e.<span class="property">offsetX</span>;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 若遊戲已結束則不創建新的球體</span></span><br><span class="line">    <span class="keyword">if</span> (isGameOver) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> level = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">5</span>); <span class="comment">// 隨機等級</span></span><br><span class="line">    holdBall = <span class="title function_">createBall</span>(level, <span class="literal">true</span>, x, <span class="literal">null</span>, <span class="literal">false</span>); <span class="comment">// 創建新的球體</span></span><br><span class="line">  &#125;, <span class="number">500</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 註冊滑鼠或觸控事件</span></span><br><span class="line">scene.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, handleMoveEvents, <span class="literal">false</span>);</span><br><span class="line">scene.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchmove&#x27;</span>, handleMoveEvents);</span><br><span class="line">scene.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseup&#x27;</span>, handleDropEvents, <span class="literal">false</span>);</span><br><span class="line">scene.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchend&#x27;</span>, handleDropEvents);</span><br></pre></td></tr></table></figure>

<p>接著，需要監聽以下事件並執行對應的邏輯。</p>
<ul>
<li>collisionStart: 球體碰撞事件，用來合成球體</li>
<li>afterUpdate: 檢測球體是否超出遊戲畫面，若超出則結束遊戲</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 監聽碰撞事件</span></span><br><span class="line"><span class="title class_">Events</span>.<span class="title function_">on</span>(engine, <span class="string">&#x27;collisionStart&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; pairs &#125; = event;</span><br><span class="line">  <span class="comment">// 遍歷碰撞對</span></span><br><span class="line">  <span class="keyword">let</span> validPairs = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pairs.<span class="property">length</span>; i += <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> pair = pairs[i];</span><br><span class="line">    <span class="comment">// 檢查碰撞對中的物體是否為非靜態的、沒有被合併過、且等級相同、且等級小於10</span></span><br><span class="line">    <span class="keyword">if</span> (!pair.<span class="property">bodyA</span>.<span class="property">isStatic</span></span><br><span class="line">      &amp;&amp; !pair.<span class="property">bodyB</span>.<span class="property">isStatic</span></span><br><span class="line">      &amp;&amp; pair.<span class="property">bodyA</span>.<span class="property">level</span> &lt; <span class="number">10</span></span><br><span class="line">      &amp;&amp; pair.<span class="property">bodyA</span>.<span class="property">level</span> === pair.<span class="property">bodyB</span>.<span class="property">level</span></span><br><span class="line">      &amp;&amp; !validPairs.<span class="title function_">has</span>(pair.<span class="property">bodyA</span>.<span class="property">id</span>)</span><br><span class="line">      &amp;&amp; !validPairs.<span class="title function_">has</span>(pair.<span class="property">bodyB</span>.<span class="property">id</span>)</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="comment">// 取得兩個物體的中心點</span></span><br><span class="line">      <span class="keyword">const</span> x = (pair.<span class="property">bodyA</span>.<span class="property">position</span>.<span class="property">x</span> + pair.<span class="property">bodyB</span>.<span class="property">position</span>.<span class="property">x</span>) / <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">const</span> y = (pair.<span class="property">bodyA</span>.<span class="property">position</span>.<span class="property">y</span> + pair.<span class="property">bodyB</span>.<span class="property">position</span>.<span class="property">y</span>) / <span class="number">2</span>;</span><br><span class="line">      <span class="comment">// 將新物體添加到世界中，並移除碰撞的原始物體</span></span><br><span class="line">      <span class="title class_">Composite</span>.<span class="title function_">remove</span>(engine.<span class="property">world</span>, [pair.<span class="property">bodyA</span>, pair.<span class="property">bodyB</span>]);</span><br><span class="line">      <span class="keyword">const</span> ball = <span class="title function_">createBall</span>(pair.<span class="property">bodyA</span>.<span class="property">level</span> + <span class="number">1</span>, <span class="literal">false</span>, x, y);</span><br><span class="line">      ball.<span class="property">updateTs</span> = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">      score.<span class="property">value</span> += <span class="number">10</span> * (pair.<span class="property">bodyA</span>.<span class="property">level</span> + <span class="number">1</span>); <span class="comment">// 更新分數</span></span><br><span class="line">      validPairs = <span class="keyword">new</span> <span class="title class_">Set</span>([...validPairs, pair.<span class="property">bodyA</span>.<span class="property">id</span>, pair.<span class="property">bodyB</span>.<span class="property">id</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 檢測所有球的包圍框是否小於限制，是的話就結束遊戲</span></span><br><span class="line"><span class="title class_">Events</span>.<span class="title function_">on</span>(engine, <span class="string">&#x27;afterUpdate&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 取得所有球體</span></span><br><span class="line">    <span class="keyword">const</span> balls = <span class="title class_">Composite</span>.<span class="title function_">allBodies</span>(engine.<span class="property">world</span>).<span class="title function_">filter</span>(<span class="function">(<span class="params">body</span>) =&gt;</span> body.<span class="property">label</span> === <span class="string">&#x27;ball&#x27;</span></span><br><span class="line">    &amp;&amp; body.<span class="property">collisionFilter</span>.<span class="property">group</span> === <span class="number">1</span></span><br><span class="line">    &amp;&amp; body.<span class="property">collisionFilter</span>.<span class="property">category</span> === categoryOn</span><br><span class="line">    &amp;&amp; <span class="title class_">Date</span>.<span class="title function_">now</span>() - body.<span class="property">updateTs</span> &gt; <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// 檢查是否有球體超出遊戲畫面</span></span><br><span class="line">    isGameOver = balls.<span class="title function_">some</span>(<span class="function">(<span class="params">ball</span>) =&gt;</span> ball.<span class="property">bounds</span>.<span class="property">min</span>.<span class="property">y</span> &lt; limitY);</span><br><span class="line">    <span class="keyword">if</span> (isGameOver) &#123;</span><br><span class="line">        <span class="title class_">Runner</span>.<span class="title function_">stop</span>(runner); <span class="comment">// 停止運行器</span></span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;獲得分數: &#x27;</span> + score.<span class="property">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>最後，若玩家希望重新開始遊戲，可以在介面上多一顆重新開始的按鈕，並使用以下程式碼，來重新開始遊戲。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重新開始遊戲按鈕</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#restart&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  score.<span class="property">value</span> = <span class="number">0</span>; <span class="comment">// 重置分數</span></span><br><span class="line">  isGameOver = <span class="literal">false</span>; <span class="comment">// 重置遊戲狀態</span></span><br><span class="line">  <span class="comment">// 清除除了邊界以外的所有物體</span></span><br><span class="line">  <span class="title class_">Composite</span>.<span class="title function_">allBodies</span>(engine.<span class="property">world</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">body</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (body.<span class="property">label</span> === <span class="string">&#x27;ball&#x27;</span>) &#123;</span><br><span class="line">      <span class="title class_">Composite</span>.<span class="title function_">remove</span>(engine.<span class="property">world</span>, body);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  holdBall = <span class="title function_">createBall</span>(<span class="number">0</span>, <span class="literal">true</span>, render.<span class="property">options</span>.<span class="property">width</span> / <span class="number">2</span>, limitY, <span class="literal">false</span>);</span><br><span class="line">  <span class="title class_">Runner</span>.<span class="title function_">run</span>(runner, engine);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h2><p>matter.js 真的很適合用來做2D物理遊戲，只需要短短幾行程式碼，就可以做出許多有趣的物理效果，更多物理效果的使用方式可以參考 <a target="_blank" rel="noopener" href="https://brm.io/matter-js/docs/">matter.js 官方文檔</a>。<br>這個遊戲的原始碼已經上傳到 <a target="_blank" rel="noopener" href="https://github.com/tatdt622989/suika-game">GitHub</a> ，你可以到這裡下載這個遊戲的原始碼，並且自己動手來製作一個西瓜遊戲。</p>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/JavaScript/">JavaScript</a>, <a href="/tags/matter-js/">matter.js</a>, <a href="/tags/Game/">Game</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <p class="title">留言</p>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=796581497680750";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="https://blog.6yuwei.com/2024/02/28/%E5%A6%82%E4%BD%95%E7%94%A8-matter-js-%E8%A3%BD%E4%BD%9C%E8%A5%BF%E7%93%9C%E9%81%8A%E6%88%B2/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜尋">
    <input type="hidden" name="as_sitesearch" value="blog.6yuwei.com">
  </form>
</div>


  

  
<div class="widget tag">
  <h3 class="title">標籤</h3>
  <ul class="entry">
  
    <li><a href="/tags/3d/">3d</a><small>1</small></li>
  
    <li><a href="/tags/AI/">AI</a><small>2</small></li>
  
    <li><a href="/tags/Blender/">Blender</a><small>1</small></li>
  
    <li><a href="/tags/Firebase/">Firebase</a><small>1</small></li>
  
    <li><a href="/tags/GPT/">GPT</a><small>1</small></li>
  
    <li><a href="/tags/Game/">Game</a><small>1</small></li>
  
    <li><a href="/tags/Google-Map/">Google Map</a><small>1</small></li>
  
    <li><a href="/tags/Japanese/">Japanese</a><small>2</small></li>
  
    <li><a href="/tags/JavaScript/">JavaScript</a><small>8</small></li>
  
    <li><a href="/tags/Linux/">Linux</a><small>1</small></li>
  
    <li><a href="/tags/Minecraft/">Minecraft</a><small>1</small></li>
  
    <li><a href="/tags/Node-js/">Node.js</a><small>1</small></li>
  
    <li><a href="/tags/React/">React</a><small>1</small></li>
  
    <li><a href="/tags/Three-js/">Three.js</a><small>2</small></li>
  
    <li><a href="/tags/TypeScript/">TypeScript</a><small>1</small></li>
  
    <li><a href="/tags/VPS/">VPS</a><small>2</small></li>
  
    <li><a href="/tags/design/">design</a><small>1</small></li>
  
    <li><a href="/tags/framework/">framework</a><small>1</small></li>
  
    <li><a href="/tags/front-end/">front end</a><small>3</small></li>
  
    <li><a href="/tags/interview/">interview</a><small>1</small></li>
  
    <li><a href="/tags/matter-js/">matter.js</a><small>1</small></li>
  
    <li><a href="/tags/other/">other</a><small>1</small></li>
  
    <li><a href="/tags/plugin/">plugin</a><small>3</small></li>
  
    <li><a href="/tags/scss/">scss</a><small>2</small></li>
  
    <li><a href="/tags/share/">share</a><small>2</small></li>
  
    <li><a href="/tags/tween-js/">tween.js</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2024 <a class="copyright" target="_blank" rel="noopener" href="https://6yuwei.com">6yuwei</a>
  
</div>
<div class="clearfix"></div></footer>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/jquery.imagesloaded.min.js"></script>


<script src="/js/custom.js?v=240229-2.js"></script>


<script src="/js/gallery.js?v=240229-2.js"></script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script>
$(function(){
  $('.fancybox').fancybox();
});
</script>

</body>
</html>
